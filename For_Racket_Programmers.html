<!DOCTYPE html>
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>13&nbsp;For Racket Programmers</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Raqit</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Basic_Syntax.html" class="tocviewlink" data-pltdoc="x">Basic Syntax</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Relations_and_Operators.html" class="tocviewlink" data-pltdoc="x">Relations and Operators</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Lists.html" class="tocviewlink" data-pltdoc="x">Lists</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Generics.html" class="tocviewlink" data-pltdoc="x">Generics</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="User-defined_Datatypes.html" class="tocviewlink" data-pltdoc="x">User-<wbr></wbr>defined Datatypes</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Modules.html" class="tocviewlink" data-pltdoc="x">Modules</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Loops.html" class="tocviewlink" data-pltdoc="x">Loops</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Classes_and_Objects.html" class="tocviewlink" data-pltdoc="x">Classes and Objects</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Definitions.html" class="tocviewlink" data-pltdoc="x">Definitions</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="Patterns.html" class="tocviewlink" data-pltdoc="x">Patterns</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Macros.html" class="tocviewlink" data-pltdoc="x">Macros</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="Interoperating_with_Racket.html" class="tocviewlink" data-pltdoc="x">Interoperating with Racket</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">For Racket Programmers</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>13&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">For Racket Programmers</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">13.1&nbsp;</td><td><a href="#%28part._def_and_fun%29" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">def</span></span> and <span class="RktSym"><span class="RktStxLink">fun</span></span></a></td></tr><tr><td align="right">13.2&nbsp;</td><td><a href="#%28part._.Unquoted_literals%29" class="tocviewlink" data-pltdoc="x">Unquoted literals</a></td></tr><tr><td align="right">13.3&nbsp;</td><td><a href="#%28part._.Interchangeable_.Delimiters%29" class="tocviewlink" data-pltdoc="x">Interchangeable Delimiters</a></td></tr><tr><td align="right">13.4&nbsp;</td><td><a href="#%28part._.Functional_.Programming%29" class="tocviewlink" data-pltdoc="x">Functional Programming</a></td></tr><tr><td align="right">13.5&nbsp;</td><td><a href="#%28part._.Host_.Language_and_.Hosted_.Languages%29" class="tocviewlink" data-pltdoc="x">Host Language and Hosted Languages</a></td></tr><tr><td align="right">13.6&nbsp;</td><td><a href="#%28part._frp~3arao%29" class="tocviewlink" data-pltdoc="x">Relations and Operators</a></td></tr><tr><td align="right">13.7&nbsp;</td><td><a href="#%28part._.Unified_macro_.Form%29" class="tocviewlink" data-pltdoc="x">Unified <span class="RktSym"><span class="RktStxLink">macro</span></span> Form</a></td></tr><tr><td align="right">13.8&nbsp;</td><td><a href="#%28part.___.Instead_of_cons_and_list_%29" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">:</span></span> Instead of <span class="RktSym"><span class="RktValLink">cons</span></span> and <span class="RktSym"><span class="RktValLink">list*</span></span></a></td></tr><tr><td align="right">13.9&nbsp;</td><td><a href="#%28part._.Pervasive_pattern-matching%29" class="tocviewlink" data-pltdoc="x">Pervasive pattern-<wbr></wbr>matching</a></td></tr><tr><td align="right">13.10&nbsp;</td><td><a href="#%28part._protocol_and_implements%29" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">protocol</span></span> and <span class="RktSym">implements</span></a></td></tr><tr><td align="right">13.11&nbsp;</td><td><a href="#%28part._loop_as_.Named_let%29" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">loop</span></span> as Named <span class="RktSym"><span class="RktStxLink">let</span></span></a></td></tr><tr><td align="right">13.12&nbsp;</td><td><a href="#%28part._.Research_and_.Planned_.Features%29" class="tocviewlink" data-pltdoc="x">Research and Planned Features</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">13.1<span class="stt">&nbsp;</span></span><a href="#%28part._def_and_fun%29" class="tocsubseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">def</span></span> and <span class="RktSym"><span class="RktStxLink">fun</span></span></a></td></tr><tr><td><span class="tocsublinknumber">13.2<span class="stt">&nbsp;</span></span><a href="#%28part._.Unquoted_literals%29" class="tocsubseclink" data-pltdoc="x">Unquoted literals</a></td></tr><tr><td><span class="tocsublinknumber">13.3<span class="stt">&nbsp;</span></span><a href="#%28part._.Interchangeable_.Delimiters%29" class="tocsubseclink" data-pltdoc="x">Interchangeable Delimiters</a></td></tr><tr><td><span class="tocsublinknumber">13.4<span class="stt">&nbsp;</span></span><a href="#%28part._.Functional_.Programming%29" class="tocsubseclink" data-pltdoc="x">Functional Programming</a></td></tr><tr><td><span class="tocsublinknumber">13.5<span class="stt">&nbsp;</span></span><a href="#%28part._.Host_.Language_and_.Hosted_.Languages%29" class="tocsubseclink" data-pltdoc="x">Host Language and Hosted Languages</a></td></tr><tr><td><span class="tocsublinknumber">13.6<span class="stt">&nbsp;</span></span><a href="#%28part._frp~3arao%29" class="tocsubseclink" data-pltdoc="x">Relations and Operators</a></td></tr><tr><td><span class="tocsublinknumber">13.7<span class="stt">&nbsp;</span></span><a href="#%28part._.Unified_macro_.Form%29" class="tocsubseclink" data-pltdoc="x">Unified <span class="RktSym"><span class="RktStxLink">macro</span></span> Form</a></td></tr><tr><td><span class="tocsublinknumber">13.8<span class="stt">&nbsp;</span></span><a href="#%28part.___.Instead_of_cons_and_list_%29" class="tocsubseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">:</span></span> Instead of <span class="RktSym"><span class="RktValLink">cons</span></span> and <span class="RktSym"><span class="RktValLink">list*</span></span></a></td></tr><tr><td><span class="tocsublinknumber">13.9<span class="stt">&nbsp;</span></span><a href="#%28part._.Pervasive_pattern-matching%29" class="tocsubseclink" data-pltdoc="x">Pervasive pattern-<wbr></wbr>matching</a></td></tr><tr><td><span class="tocsublinknumber">13.10<span class="stt">&nbsp;</span></span><a href="#%28part._protocol_and_implements%29" class="tocsubseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">protocol</span></span> and <span class="RktSym">implements</span></a></td></tr><tr><td><span class="tocsublinknumber">13.11<span class="stt">&nbsp;</span></span><a href="#%28part._loop_as_.Named_let%29" class="tocsubseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">loop</span></span> as Named <span class="RktSym"><span class="RktStxLink">let</span></span></a></td></tr><tr><td><span class="tocsublinknumber">13.12<span class="stt">&nbsp;</span></span><a href="#%28part._.Research_and_.Planned_.Features%29" class="tocsubseclink" data-pltdoc="x">Research and Planned Features</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Interoperating_with_Racket.html" title="backward to &quot;12 Interoperating with Racket&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Raqit&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><section class="SsectionLevel2" id="section 13"><h2 class="heading">13<span class="stt">&nbsp;</span><a name="(part._.For_.Racket_.Programmers)"></a>For Racket Programmers<span class="button-group"><a href="#(part._.For_.Racket_.Programmers)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h2><p>This section motivates some of the choices in Raqit.</p><section class="SsectionLevel3" id="section 13.1"><h3 class="heading">13.1<span class="stt">&nbsp;</span><a name="(part._def_and_fun)"></a><span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._def%29%29" class="RktStxLink" data-pltdoc="x">def</a></span> and <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._fun%29%29" class="RktStxLink" data-pltdoc="x">fun</a></span><span class="button-group"><a href="#(part._def_and_fun)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>Racket has a single <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> form for defining both values and functions. Raqit has separate <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._def%29%29" class="RktStxLink" data-pltdoc="x">def</a></span> and <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._fun%29%29" class="RktStxLink" data-pltdoc="x">fun</a></span> forms. This is so that the former can also handle binding multiple values unambiguously, which in Racket requires the separate <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/define.html#%28form._%28%28quote._~23~25kernel%29._define-values%29%29" class="RktStxLink" data-pltdoc="x">define-values</a></span> form. It also allows <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._fun%29%29" class="RktStxLink" data-pltdoc="x">fun</a></span> to unambiguously handle specifying both single as well as multiple arities for the function, which in Racket requires reliance on a separate <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/lambda.html#%28form._%28%28quote._~23~25kernel%29._case-lambda%29%29" class="RktStxLink" data-pltdoc="x">case-lambda</a></span>.</p><p>The names are chosen to be familiar from other contexts: Clojure and Python use the name <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._def%29%29" class="RktStxLink" data-pltdoc="x">def</a></span>, while Rhombus uses the name <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._fun%29%29" class="RktStxLink" data-pltdoc="x">fun</a></span> for the function-defining form.</p><p>In general, Raqit borrows the idea from many popular languages that defining forms need not begin with the word "define." Thus, <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._fun%29%29" class="RktStxLink" data-pltdoc="x">fun</a></span> defines a function, <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._flow%29%29" class="RktStxLink" data-pltdoc="x">flow</a></span> defines a Qi flow, and <span class="RktSym"><a href="Classes_and_Objects.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._class%29%29" class="RktStxLink" data-pltdoc="x">class</a></span> defines a class. In Racket, all of these require a prefacing form of <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span>, although this policy of Raqit&rsquo;s is consistent with the use of <span class="RktSym"><a href="User-defined_Datatypes.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span> in Racket to define a structure type. Likewise, <span class="RktSym"><a href="Generics.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._protocol%29%29" class="RktStxLink" data-pltdoc="x">protocol</a></span> defines a generic interface (the specific name is less important, but this one was chosen to match a similar facility in Clojure and in Python). An advantage of this approach, in addition to brevity, is that it makes it easier for the programmer to identify class definitions, function definitions, protocol definitions, etc., at a glance.</p></section><section class="SsectionLevel3" id="section 13.2"><h3 class="heading">13.2<span class="stt">&nbsp;</span><a name="(part._.Unquoted_literals)"></a>Unquoted literals<span class="button-group"><a href="#(part._.Unquoted_literals)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>Racket literals are quoted, meaning that, e.g., <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="stt"> </span><span class="RktVal">b</span><span class="stt"> </span><span class="RktVal">c</span><span class="RktVal">)</span> does not evaluate its arguments, a point of surprise for many newcomers, and requiring the use of <span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktSym">a</span><span class="stt"> </span><span class="RktSym">b</span><span class="stt"> </span><span class="RktSym">c</span><span class="RktPn">)</span>. Raqit allows writing unquoted literals like <span class="RktPn">[</span><span class="RktSym">a</span><span class="stt"> </span><span class="RktSym">b</span><span class="stt"> </span><span class="RktSym">c</span><span class="RktPn">]</span>, supporting a practice followed by many programming languages, including by Rhombus. It is more convenient and more visually distinct.</p></section><section class="SsectionLevel3" id="section 13.3"><h3 class="heading">13.3<span class="stt">&nbsp;</span><a name="(part._.Interchangeable_.Delimiters)"></a>Interchangeable Delimiters<span class="button-group"><a href="#(part._.Interchangeable_.Delimiters)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>At the same time, Racket programmers expect delimiter types to be interchangeable, and being able to preserve this in general syntax (aside from expression positions) is valuable. To accomplish this, Raqit handles <span class="RktPn">[</span><span class="RktPn">]</span> and <span class="RktPn">(</span><span class="RktPn">)</span> parsing at the expansion stage, when the usage context (e.g., general syntax vs expression) is already known, allowing these to be distinguished only in expression contexts and not otherwise.</p></section><section class="SsectionLevel3" id="section 13.4"><h3 class="heading">13.4<span class="stt">&nbsp;</span><a name="(part._.Functional_.Programming)"></a>Functional Programming<span class="button-group"><a href="#(part._.Functional_.Programming)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>Racket has adequate functional programming facilities but they are syntactically awkward (e.g., requiring the use of explicit <span class="RktSym">conjoin</span>, <span class="RktSym">disjoin</span> and <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/procedures.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._compose%29%29" class="RktValLink" data-pltdoc="x">compose</a></span>) or conceptually gratuitous, requiring explicit use of currying, or entailing the frequent need to spell out explicit lambdas.</p><p>Raqit&rsquo;s design makes it easy to embed Qi flows anywhere in your programs and conveniently extend the syntax of such flows in the same way as any other language form. This enables easy specification of higher-order functions, including intuitive currying syntax (e.g., <span class="RktSym">&#9775;</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">arg</span><span class="RktPn">)</span>), effortless composition (e.g., <span class="RktSym"><a href="Basic_Syntax.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span>, <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/if.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span> and <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/if.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span>), point-free dispatching (<span class="RktSym"><a href="../../../../../.local/share/racket/9.0/pkgs/qi-doc/doc/qi/Language_Interface.html#%28form._%28%28lib._qi%2Fmain..rkt%29._switch%29%29" class="RktStxLink" data-pltdoc="x">switch</a></span>) to express many common conditionals, functional optimizations not possible in Racket (deforestation), and more. Raqit strongly encourages the functional style, and with simple and elegant syntax.</p></section><section class="SsectionLevel3" id="section 13.5"><h3 class="heading">13.5<span class="stt">&nbsp;</span><a name="(part._.Host_.Language_and_.Hosted_.Languages)"></a>Host Language and Hosted Languages<span class="button-group"><a href="#(part._.Host_.Language_and_.Hosted_.Languages)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>As Racket is a general ecosystem for languages, the use of any particular DSL requires a dedicated interface macro, and dedicated forms for macro-extension. Raqit aims to be a proof-of-concept of seamlessly weaving specialized hosted DSLs into the general-purpose host language by leveraging technologies such as <a href="https://download.racket-lang.org/releases/9.0/doc/local-redirect/index.html?doc=syntax-spec-v3&amp;rel=index.html" class="Sq" data-pltdoc="x">Syntax Spec</a>, to gain the generality of the host as well as benefit from tailored, elegant syntax and performance from the specializations of each DSL. The ability to use and extend Qi flows using familiar host language patterns (e.g., the <span class="RktSym"><a href="Macros.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._macro%29%29" class="RktStxLink" data-pltdoc="x">macro</a></span> form) is one example.</p></section><section class="SsectionLevel3" id="section 13.6"><h3 class="heading">13.6<span class="stt">&nbsp;</span><a name="(part._frp~3arao)"></a>Relations and Operators<span class="button-group"><a href="#(part._frp~3arao)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>Racket has special relations and operators for working with every type. Raqit provides generic operators where it makes sense, including order relations like <span class="RktSym"><a href="Relations_and_Operators.html#%28def._%28%28lib._raqit%2Fmain..rkt%29._~3c%29%29" class="RktValLink" data-pltdoc="x">&lt;</a></span> that can sort any orderable type (e.g., numbers, strings, sets), and the <span class="RktSym"><a href="Relations_and_Operators.html#%28def._%28%28lib._raqit%2Fmain..rkt%29._~7e%29%29" class="RktValLink" data-pltdoc="x">~</a></span> append operator that can append any appendable type (e.g., lists, strings, vectors). Racket&rsquo;s type-specific relations are the most efficient, but the huge gain in economy of expression is worth the modest performance cost from generic dispatch in most cases.</p></section><section class="SsectionLevel3" id="section 13.7"><h3 class="heading">13.7<span class="stt">&nbsp;</span><a name="(part._.Unified_macro_.Form)"></a>Unified <span class="RktSym"><a href="Macros.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._macro%29%29" class="RktStxLink" data-pltdoc="x">macro</a></span> Form<span class="button-group"><a href="#(part._.Unified_macro_.Form)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>Racket provides a diverse range of macro-defining forms and at least two separate macro systems! In addition, DSLs provide their own macro-defining forms.</p><p>Raqit unifies both single and multi-clause pattern-based macros using the single <span class="RktSym"><a href="Macros.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._macro%29%29" class="RktStxLink" data-pltdoc="x">macro</a></span> form. Additionally, it uses reader-level syntax to delegate macro definitions to DSL-specific macro-defining forms, once again, expecting only the same syntax common to all macro-defining forms, i.e., single-clause vs multi-clause patterns.</p><p>This unification greatly simplifies defining macros, and also supports DSLs being seamlessly part of the host language while still retaining clear formal separation.</p></section><section class="SsectionLevel3" id="section 13.8"><h3 class="heading">13.8<span class="stt">&nbsp;</span><a name="(part.___.Instead_of_cons_and_list_)"></a><span class="RktSym"><a href="Lists.html#%28def._%28%28lib._raqit%2Fmain..rkt%29._~3a%29%29" class="RktValLink" data-pltdoc="x">:</a></span> Instead of <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span> and <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%2A%29%29" class="RktValLink" data-pltdoc="x">list*</a></span><span class="button-group"><a href="#(part.___.Instead_of_cons_and_list_)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span> intuitively generalizes to <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%2A%29%29" class="RktValLink" data-pltdoc="x">list*</a></span>, so Raqit handles both using the common and standard syntax, <span class="RktSym"><a href="Lists.html#%28def._%28%28lib._raqit%2Fmain..rkt%29._~3a%29%29" class="RktValLink" data-pltdoc="x">:</a></span> (borrowed from functional languages like Haskell), usable in both expression and pattern-matching contexts.</p></section><section class="SsectionLevel3" id="section 13.9"><h3 class="heading">13.9<span class="stt">&nbsp;</span><a name="(part._.Pervasive_pattern-matching)"></a>Pervasive pattern-matching<span class="button-group"><a href="#(part._.Pervasive_pattern-matching)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>In many cases, ordinary binding forms are naturally generalized by pattern-matching ones. Raqit (like Rhombus) scrupulously uses the pattern-matching generalizations offered by Racket, exclusively, avoiding the dichotomy without any loss in expressiveness.</p></section><section class="SsectionLevel3" id="section 13.10"><h3 class="heading">13.10<span class="stt">&nbsp;</span><a name="(part._protocol_and_implements)"></a><span class="RktSym"><a href="Generics.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._protocol%29%29" class="RktStxLink" data-pltdoc="x">protocol</a></span> and <span class="RktSym">implements</span><span class="button-group"><a href="#(part._protocol_and_implements)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>Declaring that a particular Racket struct type implements a generic interface has a complicated and non-standard syntax, where the keyword argument <span class="RktPn">#:methods</span> groups the following two otherwise ungrouped arguments, with the second one requiring an extra pair of delimiters to wrap the defined methods. Explicit grouping with <span class="RktSym">implements</span> simplifies this significantly, and also allows us to expect simply the <span class="emph">name</span> of the interface being implemented (e.g., <span class="RktPn">(</span><span class="RktSym">implements</span><span class="stt"> </span><span class="RktSym">stack</span><span class="stt"> </span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span>), instead of its exact binding (i.e., avoiding <span class="RktSym">gen:stack</span>).</p></section><section class="SsectionLevel3" id="section 13.11"><h3 class="heading">13.11<span class="stt">&nbsp;</span><a name="(part._loop_as_.Named_let)"></a><span class="RktSym"><a href="Loops.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._loop%29%29" class="RktStxLink" data-pltdoc="x">loop</a></span> as Named <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span><span class="button-group"><a href="#(part._loop_as_.Named_let)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>Racket&rsquo;s <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span> does double duty, both as a binding form as well a looping form. This makes it very useful, but it also prevents programmers from gaining valuable clues from visually scanning code that could allow them to identify that the form refers to a recursion rather than a simple scoped expression. Therefore, Raqit&rsquo;s <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span> explicitly <span class="emph">forbids</span> a name, and <span class="RktSym"><a href="Loops.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._loop%29%29" class="RktStxLink" data-pltdoc="x">loop</a></span>, while otherwise equivalent, explicitly <span class="emph">requires</span> a name. Additionally, both of these are pattern matching, making them strictly more powerful than Racket&rsquo;s <span class="RktSym"><a href="Definitions.html#%28form._%28%28lib._raqit%2Fmain..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span> (and equivalent to <span class="RktSym">match-let</span>).</p></section><section class="SsectionLevel3" id="section 13.12"><h3 class="heading">13.12<span class="stt">&nbsp;</span><a name="(part._.Research_and_.Planned_.Features)"></a>Research and Planned Features<span class="button-group"><a href="#(part._.Research_and_.Planned_.Features)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>It would be valuable to explore:</p><ol><li><p>More dedicated DSLs for major language facilities, such as exception-handling</p></li><li><p>List comprehensions</p></li><li><p>Pervasive persistent, immutable data structures</p></li><li><p>Generic collection and sequence operations</p></li></ol><p>There are also many compelling research directions being explored for Qi, intended to enable new possibilities for functional #langs including Raqit.</p></section></section><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Interoperating_with_Racket.html" title="backward to &quot;12 Interoperating with Racket&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Raqit&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>